@{
    ViewData["Title"] = "Rol Hiyerarşisi";
}

@section Head{
    <style type="text/css">
        body {
            background-color: #f7f7f7;
            font-family: 'Roboto';
        }

        .container {
            margin: 150px auto;
            max-width: 960px;
        }

        .window {
            font-weight: bold;
            cursor: pointer;
            border: 1px solid #346789;
            box-shadow: 2px 2px 10px #aaa;
            /*-o-box-shadow: 2px 2px 10px #aaa;*/
            -webkit-box-shadow: 2px 2px 10px #aaa;
            -moz-box-shadow: 2px 2px 10px #aaa;
            -moz-border-radius: 0.5em;
            border-radius: 0.5em;
            width: 15em;
            height: auto;
            padding: 0.5em 0em;
            text-align: center;
            z-index: 20;
            position: absolute;
            background-color: #eeeeef;
            color: black;
            font-family: helvetica;
            font-size: 0.9em;
            word-wrap: break-word;
        }

            .window:hover {
                box-shadow: 2px 2px 10px #444;
                /* -o-box-shadow: 2px 2px 10px #444;*/
                -webkit-box-shadow: 2px 2px 10px #444;
                -moz-box-shadow: 2px 2px 10px #444;
            }


        .hidden {
            display: none;
        }

        .collapser {
            cursor: pointer;
            border: 1px dotted gray;
            z-index: 21;
        }

        .errorWindow {
            border: 2px solid red;
        }

        #treemain {
            height: 500px;
            width: 100%;
            position: relative;
            overflow: auto;
        }
    </style>
}



<div class="row" id="app">
    <div class="col-lg-12">
     
        <div class="card">
            <div class="card-body">
                <div class="container">
                    <div id="treemain">

                        <div v-for="(item, index) in roles" :id="'node_' + index" class="window" :data-id="index" :data-parent="parentMethod(item.uid)" :data-first-child="firstChild(item.uid)" :data-next-sibling="firstSibling(item.uid)">
                            {{item.name}}
                            <div class="d-flex justify-content-around">
                                <span class="badge badge-success" title="Admin Sayısı">{{item.adminsCount}}</span>
                                <span class="badge badge-success" title="Yetki Sayısı" >{{item.permissionsCount}}</span>
                            </div>
                        </div>



                        @*<div id="node_0" class="window" data-id="0" data-parent="0" data-first-child="2" data-next-sibling="">
                        n0
                        </div>

                        <div id="node_2" class="window hidden" data-id="2" data-parent="0" data-first-child=""
                        data-next-sibling="3">
                        Node 1
                        </div>

                        <div id="node_3" class="window" data-id="3" data-parent="0" data-first-child=""
                        data-next-sibling="">
                        Node 2
                        </div>*@


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{

    <script src="~/js/jsplumb.min.js" defer></script>
    <script src="~/js/jsplumb-tree.js" defer></script>

    <script src="~/views-js/role/role-as-hierachical.js" type="module" defer></script>


}