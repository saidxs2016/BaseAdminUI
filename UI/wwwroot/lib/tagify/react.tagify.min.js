!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.React.tagify=n()}(this,function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MixedTags=void 0;var fe=function(e,n){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};n=u(n);if(n&&n.has(e))return n.get(e);var t,o,r={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&((o=d?Object.getOwnPropertyDescriptor(e,t):null)&&(o.get||o.set)?Object.defineProperty(r,t,o):r[t]=e[t]);return r.default=e,n&&n.set(e,r),r}(require("react")),pe=require("react-dom/server"),e=require("prop-types"),ye=(n=require("./tagify.js"))&&n.__esModule?n:{default:n};const t=["children"];function u(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:n})(e)}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t,o=arguments[n];for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e}).apply(this,arguments)}const ge=e=>e;var n=e=>{let F=e.name,o=e.value,n=e.loading,t=void 0!==n&&n,r=e.onInput,_=void 0===r?ge:r,d=e.onAdd,V=void 0===d?ge:d,u=e.onRemove,q=void 0===u?ge:u,i=e.onEditInput,B=void 0===i?ge:i,a=e.onEditBeforeUpdate,K=void 0===a?ge:a,c=e.onEditUpdated,A=void 0===c?ge:c,l=e.onEditStart,W=void 0===l?ge:l,s=e.onEditKeydown,H=void 0===s?ge:s,f=e.onInvalid,J=void 0===f?ge:f,p=e.onClick,z=void 0===p?ge:p,y=e.onKeydown,G=void 0===y?ge:y,g=e.onFocus,L=void 0===g?ge:g,v=e.onBlur,Q=void 0===v?ge:v,w=e.onChange,X=void 0===w?ge:w,h=e.onDropdownShow,Y=void 0===h?ge:h,O=e.onDropdownHide,Z=void 0===O?ge:O,b=e.onDropdownSelect,$=void 0===b?ge:b,m=e.onDropdownScroll,ee=void 0===m?ge:m,E=e.onDropdownNoMatch,ne=void 0===E?ge:E,j=e.onDropdownUpdated,te=void 0===j?ge:j,D=e.readOnly,M=e.disabled,oe=e.children,x=e.settings,S=void 0===x?{}:x,k=e.InputMode,re=void 0===k?"input":k,I=e.autoFocus,R=e.className,N=e.whitelist,de=e.tagifyRef,ue=e.placeholder,ie=void 0===ue?"":ue,ae=e.defaultValue,P=e.showDropdown;const T=(0,fe.useRef)(),ce=(0,fe.useRef)(),C=(0,fe.useRef)(),U=ae||o,le=(0,fe.useMemo)(()=>({ref:ce,name:F,defaultValue:oe||"string"==typeof U?U:JSON.stringify(U),className:R,readOnly:D,disabled:M,autoFocus:I,placeholder:ie}),[]),se=(0,fe.useCallback)(()=>{I&&C.current&&C.current.DOM.input.focus()},[C]);return(0,fe.useEffect)(()=>{var e=S.templates;if(e)for(var n in e){let o=e[n];String(o).includes("jsxRuntime")&&(e[n]=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,pe.renderToStaticMarkup)(fe.default.createElement(o,{props:n}))})}"textarea"==re&&(S.mode="mix"),N&&N.length&&(S.whitelist=N);const t=new ye.default(ce.current,S);return t.on("input",_).on("add",V).on("remove",q).on("invalid",J).on("keydown",G).on("focus",L).on("blur",Q).on("click",z).on("change",X).on("edit:input",B).on("edit:beforeUpdate",K).on("edit:updated",A).on("edit:start",W).on("edit:keydown",H).on("dropdown:show",Y).on("dropdown:hide",Z).on("dropdown:select",$).on("dropdown:scroll",ee).on("dropdown:noMatch",ne).on("dropdown:updated",te),de&&(de.current=t),C.current=t,se(),()=>{t.destroy()}},[]),(0,fe.useEffect)(()=>{se()},[I]),(0,fe.useEffect)(()=>{T.current&&(C.current.settings.whitelist.length=0,N&&N.length&&C.current.settings.whitelist.push(...N))},[N]),(0,fe.useEffect)(()=>{var e,n,t=C.current.getInputValue();T.current&&(e=o,t=t,(n=e=>"string"==typeof e?e:JSON.stringify(e))(e)!=n(t))&&C.current.loadOriginalValues(o)},[o]),(0,fe.useEffect)(()=>{T.current&&C.current.toggleClass(R)},[R]),(0,fe.useEffect)(()=>{T.current&&C.current.loading(t)},[t]),(0,fe.useEffect)(()=>{T.current&&C.current.setReadonly(D)},[D]),(0,fe.useEffect)(()=>{T.current&&C.current.setDisabled(M)},[M]),(0,fe.useEffect)(()=>{const e=C.current;T.current&&(P?(e.dropdown.show.call(e,P),e.toggleFocusClass(!0)):e.dropdown.hide.call(e))},[P]),(0,fe.useEffect)(()=>{T.current=!0},[]),fe.default.createElement("div",{className:"tags-input"},fe.default.createElement(re,le))};n.propTypes={name:e.string,value:(0,e.oneOfType)([e.string,e.array]),loading:e.bool,children:(0,e.oneOfType)([e.string,e.array]),onChange:e.func,readOnly:e.bool,settings:e.object,InputMode:e.string,autoFocus:e.bool,className:e.string,tagifyRef:e.object,whitelist:e.array,placeholder:e.string,defaultValue:(0,e.oneOfType)([e.string,e.array]),showDropdown:(0,e.oneOfType)([e.string,e.bool]),onInput:e.func,onAdd:e.func,onRemove:e.func,onEditInput:e.func,onEditBeforeUpdate:e.func,onEditUpdated:e.func,onEditStart:e.func,onEditKeydown:e.func,onInvalid:e.func,onClick:e.func,onKeydown:e.func,onFocus:e.func,onBlur:e.func,onDropdownShow:e.func,onDropdownHide:e.func,onDropdownSelect:e.func,onDropdownScroll:e.func,onDropdownNoMatch:e.func,onDropdownUpdated:e.func};const r=fe.default.memo(n);r.displayName="Tags",exports.MixedTags=e=>{var n=e.children,e=function(e,n){if(null==e)return{};var t,o=function(e,n){if(null==e)return{};for(var t,o={},r=Object.keys(e),d=0;d<r.length;d++)t=r[d],0<=n.indexOf(t)||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),d=0;d<r.length;d++)t=r[d],0<=n.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t]);return o}(e,t);return fe.default.createElement(r,o({InputMode:"textarea"},e),n)};e=r;return exports.default=e,exports});